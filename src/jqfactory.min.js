/*! jqfactory - v0.3.0 - 2013-08-06 
* https://github.com/gfranko/jqfactory
* Copyright (c) 2013 Greg Franko; Licensed MIT*/
!function(a){"use strict";"function"==typeof define&&define.amd?define("jqfactory",["jquery"],function(){a(window.jQuery,window,document)}):a(window.jQuery,window,document)}(function(a,b,c,d){"use strict";var e=Array.prototype.slice,f={create:function(b,c,g){var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w=c._super,x=b.split("."),y=x[0],z=x[1],A=y+"-"+z,B="."+A,C={jqfactory:f.common,namespace:y,basename:z,fullname:A,eventnamespace:B},D=c,E=a.extend({},a.isPlainObject(w)&&!a.isEmptyObject(w)?a.extend(!0,{},f.common,w):f.common,C),F={},G=(a.fn[y],{});!(y&&z&&a.isPlainObject(c))||a.isEmptyObject(c)||a[y]&&a[y][z]||(j=function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b])},j.prototype=E,a[y]=a[y]||{},a[y][z]=D,g?(F[z]=function(){return h.apply(this,arguments)},f.utils.createNamespace(y,F)):a.fn[z]=function(){return h.apply(this,arguments)},h=function(){return k=e.call(arguments),this.each(function(){i.apply(this,k)})},i=function(){if(l=k[0],m=a.isPlainObject(l)?l:{},n=c.element,o=this,p=n?a(n)[0]:o,q=a(p),r=a.data(p,A),t=D.options||{},r){if(r._init.apply(r,arguments),"string"===a.type(l)&&(k.shift(),a.isFunction(r[l])))return console.log("it came here",l),r[l].apply(r,k)}else s=new j(D),s.options=a.extend(!0,{},t,m),s._super=E,s.callingElement=o,s.$callingElement=a(o),s.element=p,s.$element=q,a.data(p,s.fullname,s),G[A]=function(b){return a(b).data(A)!==d},a.extend(a.expr[":"],G),u=s._create()||{},s.isDeferred(u)?u.done(function(){v=s._render.apply(s,arguments)||{},f.utils.postRender.call(s,v,arguments)}):(v=s._render()||{},f.utils.postRender.call(s,v))})},utils:{createNamespace:function(b,c){a.fn[b]||(a.fn[b]=function d(a){return this instanceof d?(this.__namespace_context__=a,void 0):new d(this)}),a.each(c,function(c,d){a.fn[b].prototype[c]=function(){return d.apply(this.__namespace_context__,arguments)}})},postRender:function(a,b){var c=this;c.isDeferred(a)?a.done(function(){c._on(c._events),c._postevents.apply(c,b)}):(c._on(c._events),c._postevents())}},common:{_create:a.noop,_init:a.noop,_render:a.noop,_events:{},_postevents:a.noop,_on:function(b,c){var d={};return a.isPlainObject(b)?d=b:"string"===a.type(b)&&a.isFunction(c)&&(d[b]=c),this._eventBindings(d),this._events=a.extend(!0,{},this._events,d),this},_off:function(b){var c,d={},e=-1;if(a.isArray(b))for(c=b.length;++e<c;)d[b[e]]=0;else a.isPlainObject(b)?d=b:d[b]=0;return this._eventBindings(d,"off"),this},_trigger:function(d,e,f){d="window"===d?a(b):"document"===d?a(c):d;var g=a(d).length;return f=g?f:e,e=g?e:d,d=d?d.jquery?d:g?a(d):this.$element:this.$element,d.trigger(e+this.eventnamespace,f),this},_superMethod:function(){var a=e.call(arguments),b=a.shift(),c=this._super;return c[b]?c[b].apply(this,a):void 0},delay:function(b,c){function d(){return("string"===a.type(b)?e[b]:b).apply(e,arguments)}var e=this;return setTimeout(d,c||0)},disable:function(){return this.option("disabled",!0),this._trigger("disable"),this},enable:function(){return this.option("disabled",!1),this._trigger("enable"),this},destroy:function(){return this._trigger("destroy"),a.removeData(this.callingElement,this.fullname),this._off(this._events,"off"),this},option:function(b,c){function e(a,b){for(var c,e=-1,f=a.split("."),g=f.length,h=j;++e<g;)if(c=f[e],h[c]){if(g-1===e)return b!==d?(h[c]=b,void 0):h[c];h=h[c]}}var f,g,h=this,i=c!==d,j=h.options;if(0===arguments.length)return this._trigger("getOptions",j),j;if("string"!==a.type(b)||b.length){if(a.isPlainObject(b)){for(var k in b)b.hasOwnProperty(k)&&e(k,b[k]);this._trigger("setOptions",b)}else{if(f=b.split("."),g=f.length,1===g&&!i)return this._trigger("getOption",{key:b,val:j[b]}),j[b];if(1===g&&i)j[b]=c,this._trigger("setOption",{key:b,val:c});else{if(!c)return this._trigger("getOption",{key:b,val:c}),e(b);e(b,c),this._trigger("setOption",{key:b,val:c})}}return this}},_eventBindings:function(d,e){var f,g,h,i,j,k,l,m=this,n=m.$element,o=0;e=e||"on","off"===e&&n.off(m.eventnamespace);for(f in d)o=f.lastIndexOf(" "),g=d[f],h=a.proxy(a.isFunction(g)?g:"string"===a.type(g)&&m[g]?m[g]:a.noop,m),j="!"===f.charAt(0),i=f.substring(o+1)+m.eventnamespace,-1===o?"on"===e&&n.on(i,h):j?(k=f.substring(1,o),l="window"===k?a(b):"document"===k?a(c):a(k),"on"===e?l.on(i,h):"off"===e&&l.off(i)):(k=f.substring(0,o),"on"===e&&n.on(i,k,h));return this},isDeferred:function(b){return a.isPlainObject(b)&&a.isFunction(b.promise)&&a.isFunction(b.done)}}};a.jqfactory===d&&(a.jqfactory=function(){f.create.apply(this,arguments)},a.jqfactory.common=f.common,a.jqfactory.VERSION="0.3.0")});